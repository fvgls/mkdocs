<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>cli_tests.py</title>
  <link rel="stylesheet" href="../../pycco.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <div class='section'>
    <div class='docs'><h1>cli_tests.py</h1></div>
  </div>
  <div class='clearall'>
  <div class='section' id='section-0'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-0'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">unittest</span> <span class="kn">import</span> <span class="n">mock</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">io</span>

<span class="kn">from</span> <span class="nn">click.testing</span> <span class="kn">import</span> <span class="n">CliRunner</span>

<span class="kn">from</span> <span class="nn">mkdocs</span> <span class="kn">import</span> <span class="n">__main__</span> <span class="k">as</span> <span class="n">cli</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-1'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-1'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">class</span> <span class="nc">CLITests</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-2'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-2'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">runner</span> <span class="o">=</span> <span class="n">CliRunner</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-3'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-3'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.serve.serve&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_serve_default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_serve</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;serve&quot;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">mock_serve</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
            <span class="n">dev_addr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">livereload</span><span class="o">=</span><span class="s1">&#39;livereload&#39;</span><span class="p">,</span>
            <span class="n">config_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.serve.serve&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_serve_config_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_serve</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;serve&quot;</span><span class="p">,</span> <span class="s2">&quot;--config-file&quot;</span><span class="p">,</span> <span class="s2">&quot;mkdocs.yml&quot;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_serve</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="n">mock_serve</span><span class="o">.</span><span class="n">call_args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="s1">&#39;config_file&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;config_file&#39;</span><span class="p">],</span> <span class="n">io</span><span class="o">.</span><span class="n">BufferedReader</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;config_file&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;mkdocs.yml&#39;</span><span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.serve.serve&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_serve_dev_addr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_serve</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;serve&quot;</span><span class="p">,</span> <span class="s1">&#39;--dev-addr&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0.0.0:80&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">mock_serve</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
            <span class="n">dev_addr</span><span class="o">=</span><span class="s1">&#39;0.0.0.0:80&#39;</span><span class="p">,</span>
            <span class="n">livereload</span><span class="o">=</span><span class="s1">&#39;livereload&#39;</span><span class="p">,</span>
            <span class="n">config_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.serve.serve&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_serve_strict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_serve</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;serve&quot;</span><span class="p">,</span> <span class="s1">&#39;--strict&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">mock_serve</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
            <span class="n">dev_addr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">livereload</span><span class="o">=</span><span class="s1">&#39;livereload&#39;</span><span class="p">,</span>
            <span class="n">config_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.serve.serve&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_serve_theme</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_serve</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;serve&quot;</span><span class="p">,</span> <span class="s1">&#39;--theme&#39;</span><span class="p">,</span> <span class="s1">&#39;readthedocs&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">mock_serve</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
            <span class="n">dev_addr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">livereload</span><span class="o">=</span><span class="s1">&#39;livereload&#39;</span><span class="p">,</span>
            <span class="n">config_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="s1">&#39;readthedocs&#39;</span><span class="p">,</span>
            <span class="n">theme_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.serve.serve&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_serve_theme_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_serve</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;serve&quot;</span><span class="p">,</span> <span class="s1">&#39;--theme-dir&#39;</span><span class="p">,</span> <span class="s1">&#39;custom&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">mock_serve</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
            <span class="n">dev_addr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">livereload</span><span class="o">=</span><span class="s1">&#39;livereload&#39;</span><span class="p">,</span>
            <span class="n">config_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme_dir</span><span class="o">=</span><span class="s1">&#39;custom&#39;</span><span class="p">,</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.serve.serve&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_serve_use_directory_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_serve</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;serve&quot;</span><span class="p">,</span> <span class="s1">&#39;--use-directory-urls&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">mock_serve</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
            <span class="n">dev_addr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">livereload</span><span class="o">=</span><span class="s1">&#39;livereload&#39;</span><span class="p">,</span>
            <span class="n">config_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.serve.serve&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_serve_no_directory_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_serve</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;serve&quot;</span><span class="p">,</span> <span class="s1">&#39;--no-directory-urls&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">mock_serve</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
            <span class="n">dev_addr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">livereload</span><span class="o">=</span><span class="s1">&#39;livereload&#39;</span><span class="p">,</span>
            <span class="n">config_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">False</span>
        <span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.serve.serve&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_serve_livereload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_serve</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;serve&quot;</span><span class="p">,</span> <span class="s1">&#39;--livereload&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">mock_serve</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
            <span class="n">dev_addr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">livereload</span><span class="o">=</span><span class="s1">&#39;livereload&#39;</span><span class="p">,</span>
            <span class="n">config_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.serve.serve&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_serve_no_livereload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_serve</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;serve&quot;</span><span class="p">,</span> <span class="s1">&#39;--no-livereload&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">mock_serve</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
            <span class="n">dev_addr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">livereload</span><span class="o">=</span><span class="s1">&#39;no-livereload&#39;</span><span class="p">,</span>
            <span class="n">config_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.serve.serve&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_serve_dirtyreload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_serve</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;serve&quot;</span><span class="p">,</span> <span class="s1">&#39;--dirtyreload&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">mock_serve</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
            <span class="n">dev_addr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">livereload</span><span class="o">=</span><span class="s1">&#39;dirty&#39;</span><span class="p">,</span>
            <span class="n">config_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_build_defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;build&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="n">mock_build</span><span class="o">.</span><span class="n">call_args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="s1">&#39;dirty&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dirty&#39;</span><span class="p">])</span>
        <span class="n">mock_load_config</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
            <span class="n">config_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">site_dir</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>
        <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;mkdocs&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">logger</span><span class="o">.</span><span class="n">level</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_build_clean</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;build&#39;</span><span class="p">,</span> <span class="s1">&#39;--clean&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="n">mock_build</span><span class="o">.</span><span class="n">call_args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="s1">&#39;dirty&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dirty&#39;</span><span class="p">])</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_build_dirty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;build&#39;</span><span class="p">,</span> <span class="s1">&#39;--dirty&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="n">mock_build</span><span class="o">.</span><span class="n">call_args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="s1">&#39;dirty&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dirty&#39;</span><span class="p">])</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_build_config_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;build&#39;</span><span class="p">,</span> <span class="s1">&#39;--config-file&#39;</span><span class="p">,</span> <span class="s1">&#39;mkdocs.yml&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_load_config</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="n">mock_load_config</span><span class="o">.</span><span class="n">call_args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="s1">&#39;config_file&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;config_file&#39;</span><span class="p">],</span> <span class="n">io</span><span class="o">.</span><span class="n">BufferedReader</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;config_file&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;mkdocs.yml&#39;</span><span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_build_strict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;build&#39;</span><span class="p">,</span> <span class="s1">&#39;--strict&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">mock_load_config</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
            <span class="n">config_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">site_dir</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_build_theme</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;build&#39;</span><span class="p">,</span> <span class="s1">&#39;--theme&#39;</span><span class="p">,</span> <span class="s1">&#39;readthedocs&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">mock_load_config</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
            <span class="n">config_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="s1">&#39;readthedocs&#39;</span><span class="p">,</span>
            <span class="n">theme_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">site_dir</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_build_theme_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;build&#39;</span><span class="p">,</span> <span class="s1">&#39;--theme-dir&#39;</span><span class="p">,</span> <span class="s1">&#39;custom&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">mock_load_config</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
            <span class="n">config_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme_dir</span><span class="o">=</span><span class="s1">&#39;custom&#39;</span><span class="p">,</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">site_dir</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_build_use_directory_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;build&#39;</span><span class="p">,</span> <span class="s1">&#39;--use-directory-urls&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">mock_load_config</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
            <span class="n">config_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">site_dir</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_build_no_directory_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;build&#39;</span><span class="p">,</span> <span class="s1">&#39;--no-directory-urls&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">mock_load_config</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
            <span class="n">config_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">site_dir</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_build_site_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;build&#39;</span><span class="p">,</span> <span class="s1">&#39;--site-dir&#39;</span><span class="p">,</span> <span class="s1">&#39;custom&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">mock_load_config</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
            <span class="n">config_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">site_dir</span><span class="o">=</span><span class="s1">&#39;custom&#39;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_build_verbose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;build&#39;</span><span class="p">,</span> <span class="s1">&#39;--verbose&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;mkdocs&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">logger</span><span class="o">.</span><span class="n">level</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_build_quiet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;build&#39;</span><span class="p">,</span> <span class="s1">&#39;--quiet&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;mkdocs&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">logger</span><span class="o">.</span><span class="n">level</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">ERROR</span><span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.new.new&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_new</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_new</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">,</span> <span class="s2">&quot;project&quot;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">mock_new</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span><span class="s1">&#39;project&#39;</span><span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.gh_deploy.gh_deploy&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_gh_deploy_defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_gh_deploy</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;gh-deploy&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_gh_deploy</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">g_args</span><span class="p">,</span> <span class="n">g_kwargs</span> <span class="o">=</span> <span class="n">mock_gh_deploy</span><span class="o">.</span><span class="n">call_args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="s1">&#39;message&#39;</span> <span class="ow">in</span> <span class="n">g_kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">g_kwargs</span><span class="p">[</span><span class="s1">&#39;message&#39;</span><span class="p">],</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="s1">&#39;force&#39;</span> <span class="ow">in</span> <span class="n">g_kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">g_kwargs</span><span class="p">[</span><span class="s1">&#39;force&#39;</span><span class="p">],</span> <span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="s1">&#39;ignore_version&#39;</span> <span class="ow">in</span> <span class="n">g_kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">g_kwargs</span><span class="p">[</span><span class="s1">&#39;ignore_version&#39;</span><span class="p">],</span> <span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">b_args</span><span class="p">,</span> <span class="n">b_kwargs</span> <span class="o">=</span> <span class="n">mock_build</span><span class="o">.</span><span class="n">call_args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="s1">&#39;dirty&#39;</span> <span class="ow">in</span> <span class="n">b_kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">b_kwargs</span><span class="p">[</span><span class="s1">&#39;dirty&#39;</span><span class="p">])</span>
        <span class="n">mock_load_config</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
            <span class="n">remote_branch</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">remote_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">config_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">site_dir</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.gh_deploy.gh_deploy&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_gh_deploy_clean</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_gh_deploy</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;gh-deploy&#39;</span><span class="p">,</span> <span class="s1">&#39;--clean&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_gh_deploy</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="n">mock_build</span><span class="o">.</span><span class="n">call_args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="s1">&#39;dirty&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dirty&#39;</span><span class="p">])</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.gh_deploy.gh_deploy&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_gh_deploy_dirty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_gh_deploy</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;gh-deploy&#39;</span><span class="p">,</span> <span class="s1">&#39;--dirty&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_gh_deploy</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="n">mock_build</span><span class="o">.</span><span class="n">call_args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="s1">&#39;dirty&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;dirty&#39;</span><span class="p">])</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.gh_deploy.gh_deploy&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_gh_deploy_config_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_gh_deploy</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;gh-deploy&#39;</span><span class="p">,</span> <span class="s1">&#39;--config-file&#39;</span><span class="p">,</span> <span class="s1">&#39;mkdocs.yml&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_gh_deploy</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_load_config</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="n">mock_load_config</span><span class="o">.</span><span class="n">call_args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="s1">&#39;config_file&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;config_file&#39;</span><span class="p">],</span> <span class="n">io</span><span class="o">.</span><span class="n">BufferedReader</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;config_file&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;mkdocs.yml&#39;</span><span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.gh_deploy.gh_deploy&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_gh_deploy_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_gh_deploy</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;gh-deploy&#39;</span><span class="p">,</span> <span class="s1">&#39;--message&#39;</span><span class="p">,</span> <span class="s1">&#39;A commit message&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_gh_deploy</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">g_args</span><span class="p">,</span> <span class="n">g_kwargs</span> <span class="o">=</span> <span class="n">mock_gh_deploy</span><span class="o">.</span><span class="n">call_args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="s1">&#39;message&#39;</span> <span class="ow">in</span> <span class="n">g_kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">g_kwargs</span><span class="p">[</span><span class="s1">&#39;message&#39;</span><span class="p">],</span> <span class="s1">&#39;A commit message&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_load_config</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.gh_deploy.gh_deploy&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_gh_deploy_remote_branch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_gh_deploy</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;gh-deploy&#39;</span><span class="p">,</span> <span class="s1">&#39;--remote-branch&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_gh_deploy</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">mock_load_config</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
            <span class="n">remote_branch</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span>
            <span class="n">remote_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">config_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">site_dir</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.gh_deploy.gh_deploy&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_gh_deploy_remote_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_gh_deploy</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;gh-deploy&#39;</span><span class="p">,</span> <span class="s1">&#39;--remote-name&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_gh_deploy</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">mock_load_config</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
            <span class="n">remote_branch</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">remote_name</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span>
            <span class="n">config_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">site_dir</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.gh_deploy.gh_deploy&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_gh_deploy_force</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_gh_deploy</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;gh-deploy&#39;</span><span class="p">,</span> <span class="s1">&#39;--force&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_gh_deploy</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">g_args</span><span class="p">,</span> <span class="n">g_kwargs</span> <span class="o">=</span> <span class="n">mock_gh_deploy</span><span class="o">.</span><span class="n">call_args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="s1">&#39;force&#39;</span> <span class="ow">in</span> <span class="n">g_kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">g_kwargs</span><span class="p">[</span><span class="s1">&#39;force&#39;</span><span class="p">],</span> <span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_load_config</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.gh_deploy.gh_deploy&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_gh_deploy_ignore_version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_gh_deploy</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;gh-deploy&#39;</span><span class="p">,</span> <span class="s1">&#39;--ignore-version&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_gh_deploy</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">g_args</span><span class="p">,</span> <span class="n">g_kwargs</span> <span class="o">=</span> <span class="n">mock_gh_deploy</span><span class="o">.</span><span class="n">call_args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="s1">&#39;ignore_version&#39;</span> <span class="ow">in</span> <span class="n">g_kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">g_kwargs</span><span class="p">[</span><span class="s1">&#39;ignore_version&#39;</span><span class="p">],</span> <span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_load_config</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.gh_deploy.gh_deploy&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_gh_deploy_strict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_gh_deploy</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;gh-deploy&#39;</span><span class="p">,</span> <span class="s1">&#39;--strict&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_gh_deploy</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">mock_load_config</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
            <span class="n">remote_branch</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">remote_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">config_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">site_dir</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.gh_deploy.gh_deploy&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_gh_deploy_theme</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_gh_deploy</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;gh-deploy&#39;</span><span class="p">,</span> <span class="s1">&#39;--theme&#39;</span><span class="p">,</span> <span class="s1">&#39;readthedocs&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_gh_deploy</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">mock_load_config</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
            <span class="n">remote_branch</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">remote_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">config_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="s1">&#39;readthedocs&#39;</span><span class="p">,</span>
            <span class="n">theme_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">site_dir</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.gh_deploy.gh_deploy&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_gh_deploy_theme_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_gh_deploy</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;gh-deploy&#39;</span><span class="p">,</span> <span class="s1">&#39;--theme-dir&#39;</span><span class="p">,</span> <span class="s1">&#39;custom&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_gh_deploy</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">mock_load_config</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
            <span class="n">remote_branch</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">remote_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">config_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme_dir</span><span class="o">=</span><span class="s1">&#39;custom&#39;</span><span class="p">,</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">site_dir</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.gh_deploy.gh_deploy&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_gh_deploy_use_directory_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_gh_deploy</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;gh-deploy&#39;</span><span class="p">,</span> <span class="s1">&#39;--use-directory-urls&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_gh_deploy</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">mock_load_config</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
            <span class="n">remote_branch</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">remote_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">config_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">site_dir</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.gh_deploy.gh_deploy&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_gh_deploy_no_directory_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_gh_deploy</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;gh-deploy&#39;</span><span class="p">,</span> <span class="s1">&#39;--no-directory-urls&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_gh_deploy</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">mock_load_config</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
            <span class="n">remote_branch</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">remote_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">config_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">site_dir</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.config.load_config&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.build&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.gh_deploy.gh_deploy&#39;</span><span class="p">,</span> <span class="n">autospec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_gh_deploy_site_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_gh_deploy</span><span class="p">,</span> <span class="n">mock_build</span><span class="p">,</span> <span class="n">mock_load_config</span><span class="p">):</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
            <span class="n">cli</span><span class="o">.</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;gh-deploy&#39;</span><span class="p">,</span> <span class="s1">&#39;--site-dir&#39;</span><span class="p">,</span> <span class="s1">&#39;custom&#39;</span><span class="p">],</span> <span class="n">catch_exceptions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exit_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_gh_deploy</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mock_build</span><span class="o">.</span><span class="n">call_count</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">mock_load_config</span><span class="o">.</span><span class="n">assert_called_once_with</span><span class="p">(</span>
            <span class="n">remote_branch</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">remote_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">config_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">theme_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">site_dir</span><span class="o">=</span><span class="s1">&#39;custom&#39;</span>
        <span class="p">)</span>

</pre></div>
    </div>
  </div>
  <div class='clearall'></div>
</div>
</body>
