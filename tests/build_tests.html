<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>build_tests.py</title>
  <link rel="stylesheet" href="../../pycco.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <div class='section'>
    <div class='docs'><h1>build_tests.py</h1></div>
  </div>
  <div class='clearall'>
  <div class='section' id='section-0'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-0'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">unittest</span> <span class="kn">import</span> <span class="n">mock</span>
<span class="kn">import</span> <span class="nn">unittest</span>

<span class="kn">from</span> <span class="nn">mkdocs.structure.pages</span> <span class="kn">import</span> <span class="n">Page</span>
<span class="kn">from</span> <span class="nn">mkdocs.structure.files</span> <span class="kn">import</span> <span class="n">File</span><span class="p">,</span> <span class="n">Files</span>
<span class="kn">from</span> <span class="nn">mkdocs.structure.nav</span> <span class="kn">import</span> <span class="n">get_navigation</span>
<span class="kn">from</span> <span class="nn">mkdocs.commands</span> <span class="kn">import</span> <span class="n">build</span>
<span class="kn">from</span> <span class="nn">mkdocs.tests.base</span> <span class="kn">import</span> <span class="n">load_config</span><span class="p">,</span> <span class="n">tempdir</span><span class="p">,</span> <span class="n">PathAssertionMixin</span>
<span class="kn">from</span> <span class="nn">mkdocs.utils</span> <span class="kn">import</span> <span class="n">meta</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-1'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-1'>#</a>
      </div>
      <p>Helper which returns a Page object.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">build_page</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">md_src</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-2'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-2'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">files</span> <span class="o">=</span> <span class="n">Files</span><span class="p">([</span><span class="n">File</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;docs_dir&#39;</span><span class="p">],</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;site_dir&#39;</span><span class="p">],</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;use_directory_urls&#39;</span><span class="p">])])</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">Page</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">files</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="n">config</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-3'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-3'>#</a>
      </div>
      <p>Fake page.read_source()</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">page</span><span class="o">.</span><span class="n">markdown</span><span class="p">,</span> <span class="n">page</span><span class="o">.</span><span class="n">meta</span> <span class="o">=</span> <span class="n">meta</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="n">md_src</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">page</span><span class="p">,</span> <span class="n">files</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-4'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-4'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">class</span> <span class="nc">BuildTests</span><span class="p">(</span><span class="n">PathAssertionMixin</span><span class="p">,</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-5'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-5'>#</a>
      </div>
      <p>assert that the mock was called only once.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">assert_mock_called_once</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-6'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-6'>#</a>
      </div>
      <p>The <code>mock.assert_called_once()</code> method was added in PY36.
TODO: Remove this when PY35 support is dropped.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">try</span><span class="p">:</span>
            <span class="n">mock</span><span class="o">.</span><span class="n">assert_called_once</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">mock</span><span class="o">.</span><span class="n">call_count</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Expected &#39;</span><span class="si">%s</span><span class="s2">&#39; to have been called once. Called </span><span class="si">%s</span><span class="s2"> times.&quot;</span> <span class="o">%</span>
                       <span class="p">(</span><span class="n">mock</span><span class="o">.</span><span class="n">_mock_name</span> <span class="ow">or</span> <span class="s1">&#39;mock&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">call_count</span><span class="p">))</span>
                <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-7'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-7'>#</a>
      </div>
      <p>Test build.get_context</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-8'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-8'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">test_context_base_url_homepage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">nav_cfg</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="s1">&#39;Home&#39;</span><span class="p">:</span> <span class="s1">&#39;index.md&#39;</span><span class="p">}</span>
        <span class="p">]</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="n">nav</span><span class="o">=</span><span class="n">nav_cfg</span><span class="p">,</span> <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">files</span> <span class="o">=</span> <span class="n">Files</span><span class="p">([</span>
            <span class="n">File</span><span class="p">(</span><span class="s1">&#39;index.md&#39;</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;docs_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;site_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;use_directory_urls&#39;</span><span class="p">]),</span>
        <span class="p">])</span>
        <span class="n">nav</span> <span class="o">=</span> <span class="n">get_navigation</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="n">cfg</span><span class="p">)</span>
        <span class="n">context</span> <span class="o">=</span> <span class="n">build</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">nav</span><span class="p">,</span> <span class="n">files</span><span class="p">,</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">nav</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;base_url&#39;</span><span class="p">],</span> <span class="s1">&#39;.&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-9'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-9'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">test_context_base_url_homepage_use_directory_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">nav_cfg</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="s1">&#39;Home&#39;</span><span class="p">:</span> <span class="s1">&#39;index.md&#39;</span><span class="p">}</span>
        <span class="p">]</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="n">nav</span><span class="o">=</span><span class="n">nav_cfg</span><span class="p">)</span>
        <span class="n">files</span> <span class="o">=</span> <span class="n">Files</span><span class="p">([</span>
            <span class="n">File</span><span class="p">(</span><span class="s1">&#39;index.md&#39;</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;docs_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;site_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;use_directory_urls&#39;</span><span class="p">]),</span>
        <span class="p">])</span>
        <span class="n">nav</span> <span class="o">=</span> <span class="n">get_navigation</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="n">cfg</span><span class="p">)</span>
        <span class="n">context</span> <span class="o">=</span> <span class="n">build</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">nav</span><span class="p">,</span> <span class="n">files</span><span class="p">,</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">nav</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;base_url&#39;</span><span class="p">],</span> <span class="s1">&#39;.&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-10'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-10'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">test_context_base_url_nested_page</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">nav_cfg</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="s1">&#39;Home&#39;</span><span class="p">:</span> <span class="s1">&#39;index.md&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s1">&#39;Nested&#39;</span><span class="p">:</span> <span class="s1">&#39;foo/bar.md&#39;</span><span class="p">}</span>
        <span class="p">]</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="n">nav</span><span class="o">=</span><span class="n">nav_cfg</span><span class="p">,</span> <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">files</span> <span class="o">=</span> <span class="n">Files</span><span class="p">([</span>
            <span class="n">File</span><span class="p">(</span><span class="s1">&#39;index.md&#39;</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;docs_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;site_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;use_directory_urls&#39;</span><span class="p">]),</span>
            <span class="n">File</span><span class="p">(</span><span class="s1">&#39;foo/bar.md&#39;</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;docs_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;site_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;use_directory_urls&#39;</span><span class="p">])</span>
        <span class="p">])</span>
        <span class="n">nav</span> <span class="o">=</span> <span class="n">get_navigation</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="n">cfg</span><span class="p">)</span>
        <span class="n">context</span> <span class="o">=</span> <span class="n">build</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">nav</span><span class="p">,</span> <span class="n">files</span><span class="p">,</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">nav</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;base_url&#39;</span><span class="p">],</span> <span class="s1">&#39;..&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-11'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-11'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">test_context_base_url_nested_page_use_directory_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">nav_cfg</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="s1">&#39;Home&#39;</span><span class="p">:</span> <span class="s1">&#39;index.md&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s1">&#39;Nested&#39;</span><span class="p">:</span> <span class="s1">&#39;foo/bar.md&#39;</span><span class="p">}</span>
        <span class="p">]</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="n">nav</span><span class="o">=</span><span class="n">nav_cfg</span><span class="p">)</span>
        <span class="n">files</span> <span class="o">=</span> <span class="n">Files</span><span class="p">([</span>
            <span class="n">File</span><span class="p">(</span><span class="s1">&#39;index.md&#39;</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;docs_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;site_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;use_directory_urls&#39;</span><span class="p">]),</span>
            <span class="n">File</span><span class="p">(</span><span class="s1">&#39;foo/bar.md&#39;</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;docs_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;site_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;use_directory_urls&#39;</span><span class="p">])</span>
        <span class="p">])</span>
        <span class="n">nav</span> <span class="o">=</span> <span class="n">get_navigation</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="n">cfg</span><span class="p">)</span>
        <span class="n">context</span> <span class="o">=</span> <span class="n">build</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">nav</span><span class="p">,</span> <span class="n">files</span><span class="p">,</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">nav</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;base_url&#39;</span><span class="p">],</span> <span class="s1">&#39;../..&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-12'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-12'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">test_context_base_url_relative_no_page</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">context</span> <span class="o">=</span> <span class="n">build</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">(),</span> <span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">(),</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;..&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;base_url&#39;</span><span class="p">],</span> <span class="s1">&#39;..&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-13'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-13'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">test_context_base_url_relative_no_page_use_directory_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">()</span>
        <span class="n">context</span> <span class="o">=</span> <span class="n">build</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">(),</span> <span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">(),</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;..&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;base_url&#39;</span><span class="p">],</span> <span class="s1">&#39;..&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-14'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-14'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">test_context_base_url_absolute_no_page</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">context</span> <span class="o">=</span> <span class="n">build</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">(),</span> <span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">(),</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;base_url&#39;</span><span class="p">],</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-15'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-15'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">test_context_base_url__absolute_no_page_use_directory_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">()</span>
        <span class="n">context</span> <span class="o">=</span> <span class="n">build</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">(),</span> <span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">(),</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;base_url&#39;</span><span class="p">],</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-16'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-16'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">test_context_base_url_absolute_nested_no_page</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">context</span> <span class="o">=</span> <span class="n">build</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">(),</span> <span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">(),</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;/foo/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;base_url&#39;</span><span class="p">],</span> <span class="s1">&#39;/foo/&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-17'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-17'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">test_context_base_url__absolute_nested_no_page_use_directory_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">()</span>
        <span class="n">context</span> <span class="o">=</span> <span class="n">build</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">(),</span> <span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">(),</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;/foo/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;base_url&#39;</span><span class="p">],</span> <span class="s1">&#39;/foo/&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-18'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-18'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">test_context_extra_css_js_from_homepage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">nav_cfg</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="s1">&#39;Home&#39;</span><span class="p">:</span> <span class="s1">&#39;index.md&#39;</span><span class="p">}</span>
        <span class="p">]</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span>
            <span class="n">nav</span><span class="o">=</span><span class="n">nav_cfg</span><span class="p">,</span>
            <span class="n">extra_css</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;style.css&#39;</span><span class="p">],</span>
            <span class="n">extra_javascript</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;script.js&#39;</span><span class="p">],</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">False</span>
        <span class="p">)</span>
        <span class="n">files</span> <span class="o">=</span> <span class="n">Files</span><span class="p">([</span>
            <span class="n">File</span><span class="p">(</span><span class="s1">&#39;index.md&#39;</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;docs_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;site_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;use_directory_urls&#39;</span><span class="p">]),</span>
        <span class="p">])</span>
        <span class="n">nav</span> <span class="o">=</span> <span class="n">get_navigation</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="n">cfg</span><span class="p">)</span>
        <span class="n">context</span> <span class="o">=</span> <span class="n">build</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">nav</span><span class="p">,</span> <span class="n">files</span><span class="p">,</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">nav</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;extra_css&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;style.css&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;extra_javascript&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;script.js&#39;</span><span class="p">])</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-19'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-19'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">test_context_extra_css_js_from_nested_page</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">nav_cfg</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="s1">&#39;Home&#39;</span><span class="p">:</span> <span class="s1">&#39;index.md&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s1">&#39;Nested&#39;</span><span class="p">:</span> <span class="s1">&#39;foo/bar.md&#39;</span><span class="p">}</span>
        <span class="p">]</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span>
            <span class="n">nav</span><span class="o">=</span><span class="n">nav_cfg</span><span class="p">,</span>
            <span class="n">extra_css</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;style.css&#39;</span><span class="p">],</span>
            <span class="n">extra_javascript</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;script.js&#39;</span><span class="p">],</span>
            <span class="n">use_directory_urls</span><span class="o">=</span><span class="kc">False</span>
        <span class="p">)</span>
        <span class="n">files</span> <span class="o">=</span> <span class="n">Files</span><span class="p">([</span>
            <span class="n">File</span><span class="p">(</span><span class="s1">&#39;index.md&#39;</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;docs_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;site_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;use_directory_urls&#39;</span><span class="p">]),</span>
            <span class="n">File</span><span class="p">(</span><span class="s1">&#39;foo/bar.md&#39;</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;docs_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;site_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;use_directory_urls&#39;</span><span class="p">])</span>
        <span class="p">])</span>
        <span class="n">nav</span> <span class="o">=</span> <span class="n">get_navigation</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="n">cfg</span><span class="p">)</span>
        <span class="n">context</span> <span class="o">=</span> <span class="n">build</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">nav</span><span class="p">,</span> <span class="n">files</span><span class="p">,</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">nav</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;extra_css&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;../style.css&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;extra_javascript&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;../script.js&#39;</span><span class="p">])</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-20'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-20'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">test_context_extra_css_js_from_nested_page_use_directory_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">nav_cfg</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="s1">&#39;Home&#39;</span><span class="p">:</span> <span class="s1">&#39;index.md&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s1">&#39;Nested&#39;</span><span class="p">:</span> <span class="s1">&#39;foo/bar.md&#39;</span><span class="p">}</span>
        <span class="p">]</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span>
            <span class="n">nav</span><span class="o">=</span><span class="n">nav_cfg</span><span class="p">,</span>
            <span class="n">extra_css</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;style.css&#39;</span><span class="p">],</span>
            <span class="n">extra_javascript</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;script.js&#39;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">files</span> <span class="o">=</span> <span class="n">Files</span><span class="p">([</span>
            <span class="n">File</span><span class="p">(</span><span class="s1">&#39;index.md&#39;</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;docs_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;site_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;use_directory_urls&#39;</span><span class="p">]),</span>
            <span class="n">File</span><span class="p">(</span><span class="s1">&#39;foo/bar.md&#39;</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;docs_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;site_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;use_directory_urls&#39;</span><span class="p">])</span>
        <span class="p">])</span>
        <span class="n">nav</span> <span class="o">=</span> <span class="n">get_navigation</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="n">cfg</span><span class="p">)</span>
        <span class="n">context</span> <span class="o">=</span> <span class="n">build</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">nav</span><span class="p">,</span> <span class="n">files</span><span class="p">,</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">nav</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;extra_css&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;../../style.css&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;extra_javascript&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;../../script.js&#39;</span><span class="p">])</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-21'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-21'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">test_context_extra_css_js_no_page</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="n">extra_css</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;style.css&#39;</span><span class="p">],</span> <span class="n">extra_javascript</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;script.js&#39;</span><span class="p">])</span>
        <span class="n">context</span> <span class="o">=</span> <span class="n">build</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">(),</span> <span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">(),</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;..&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;extra_css&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;../style.css&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;extra_javascript&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;../script.js&#39;</span><span class="p">])</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-22'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-22'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">test_extra_context</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="n">extra</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="n">context</span> <span class="o">=</span> <span class="n">build</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">(),</span> <span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">(),</span> <span class="n">cfg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;config&#39;</span><span class="p">][</span><span class="s1">&#39;extra&#39;</span><span class="p">][</span><span class="s1">&#39;a&#39;</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-23'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-23'>#</a>
      </div>
      <p>Test build._build_theme_template</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-24'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-24'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.utils.write_file&#39;</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build._build_template&#39;</span><span class="p">,</span> <span class="n">return_value</span><span class="o">=</span><span class="s1">&#39;some content&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_build_theme_template</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_build_template</span><span class="p">,</span> <span class="n">mock_write_file</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">()</span>
        <span class="n">env</span> <span class="o">=</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;theme&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_env</span><span class="p">()</span>
        <span class="n">build</span><span class="o">.</span><span class="n">_build_theme_template</span><span class="p">(</span><span class="s1">&#39;main.html&#39;</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">(),</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assert_mock_called_once</span><span class="p">(</span><span class="n">mock_write_file</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assert_mock_called_once</span><span class="p">(</span><span class="n">mock_build_template</span><span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.utils.write_file&#39;</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build._build_template&#39;</span><span class="p">,</span> <span class="n">return_value</span><span class="o">=</span><span class="s1">&#39;some content&#39;</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;gzip.open&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_build_sitemap_template</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_gzip_open</span><span class="p">,</span> <span class="n">mock_build_template</span><span class="p">,</span> <span class="n">mock_write_file</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">()</span>
        <span class="n">env</span> <span class="o">=</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;theme&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_env</span><span class="p">()</span>
        <span class="n">build</span><span class="o">.</span><span class="n">_build_theme_template</span><span class="p">(</span><span class="s1">&#39;sitemap.xml&#39;</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">(),</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assert_mock_called_once</span><span class="p">(</span><span class="n">mock_write_file</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assert_mock_called_once</span><span class="p">(</span><span class="n">mock_build_template</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assert_mock_called_once</span><span class="p">(</span><span class="n">mock_gzip_open</span><span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.utils.write_file&#39;</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build._build_template&#39;</span><span class="p">,</span> <span class="n">return_value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_skip_missing_theme_template</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_build_template</span><span class="p">,</span> <span class="n">mock_write_file</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">()</span>
        <span class="n">env</span> <span class="o">=</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;theme&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_env</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertLogs</span><span class="p">(</span><span class="s1">&#39;mkdocs&#39;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s1">&#39;WARN&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">cm</span><span class="p">:</span>
            <span class="n">build</span><span class="o">.</span><span class="n">_build_theme_template</span><span class="p">(</span><span class="s1">&#39;missing.html&#39;</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">(),</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">cm</span><span class="o">.</span><span class="n">output</span><span class="p">,</span>
            <span class="p">[</span><span class="s2">&quot;WARNING:mkdocs.commands.build:Template skipped: &#39;missing.html&#39; not found in theme directories.&quot;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">mock_write_file</span><span class="o">.</span><span class="n">assert_not_called</span><span class="p">()</span>
        <span class="n">mock_build_template</span><span class="o">.</span><span class="n">assert_not_called</span><span class="p">()</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.utils.write_file&#39;</span><span class="p">)</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build._build_template&#39;</span><span class="p">,</span> <span class="n">return_value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_skip_theme_template_empty_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_build_template</span><span class="p">,</span> <span class="n">mock_write_file</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">()</span>
        <span class="n">env</span> <span class="o">=</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;theme&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_env</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertLogs</span><span class="p">(</span><span class="s1">&#39;mkdocs&#39;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s1">&#39;INFO&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">cm</span><span class="p">:</span>
            <span class="n">build</span><span class="o">.</span><span class="n">_build_theme_template</span><span class="p">(</span><span class="s1">&#39;main.html&#39;</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">(),</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">cm</span><span class="o">.</span><span class="n">output</span><span class="p">,</span>
            <span class="p">[</span><span class="s2">&quot;INFO:mkdocs.commands.build:Template skipped: &#39;main.html&#39; generated empty output.&quot;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">mock_write_file</span><span class="o">.</span><span class="n">assert_not_called</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assert_mock_called_once</span><span class="p">(</span><span class="n">mock_build_template</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-25'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-25'>#</a>
      </div>
      <p>Test build._build_extra_template</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-26'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-26'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.open&#39;</span><span class="p">,</span> <span class="n">mock</span><span class="o">.</span><span class="n">mock_open</span><span class="p">(</span><span class="n">read_data</span><span class="o">=</span><span class="s1">&#39;template content&#39;</span><span class="p">))</span>
    <span class="k">def</span> <span class="nf">test_build_extra_template</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">()</span>
        <span class="n">files</span> <span class="o">=</span> <span class="n">Files</span><span class="p">([</span>
            <span class="n">File</span><span class="p">(</span><span class="s1">&#39;foo.html&#39;</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;docs_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;site_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;use_directory_urls&#39;</span><span class="p">]),</span>
        <span class="p">])</span>
        <span class="n">build</span><span class="o">.</span><span class="n">_build_extra_template</span><span class="p">(</span><span class="s1">&#39;foo.html&#39;</span><span class="p">,</span> <span class="n">files</span><span class="p">,</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">())</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.open&#39;</span><span class="p">,</span> <span class="n">mock</span><span class="o">.</span><span class="n">mock_open</span><span class="p">(</span><span class="n">read_data</span><span class="o">=</span><span class="s1">&#39;template content&#39;</span><span class="p">))</span>
    <span class="k">def</span> <span class="nf">test_skip_missing_extra_template</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">()</span>
        <span class="n">files</span> <span class="o">=</span> <span class="n">Files</span><span class="p">([</span>
            <span class="n">File</span><span class="p">(</span><span class="s1">&#39;foo.html&#39;</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;docs_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;site_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;use_directory_urls&#39;</span><span class="p">]),</span>
        <span class="p">])</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertLogs</span><span class="p">(</span><span class="s1">&#39;mkdocs&#39;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s1">&#39;INFO&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">cm</span><span class="p">:</span>
            <span class="n">build</span><span class="o">.</span><span class="n">_build_extra_template</span><span class="p">(</span><span class="s1">&#39;missing.html&#39;</span><span class="p">,</span> <span class="n">files</span><span class="p">,</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">cm</span><span class="o">.</span><span class="n">output</span><span class="p">,</span>
            <span class="p">[</span><span class="s2">&quot;WARNING:mkdocs.commands.build:Template skipped: &#39;missing.html&#39; not found in docs_dir.&quot;</span><span class="p">]</span>
        <span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.open&#39;</span><span class="p">,</span> <span class="n">side_effect</span><span class="o">=</span><span class="ne">OSError</span><span class="p">(</span><span class="s1">&#39;Error message.&#39;</span><span class="p">))</span>
    <span class="k">def</span> <span class="nf">test_skip_ioerror_extra_template</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_open</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">()</span>
        <span class="n">files</span> <span class="o">=</span> <span class="n">Files</span><span class="p">([</span>
            <span class="n">File</span><span class="p">(</span><span class="s1">&#39;foo.html&#39;</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;docs_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;site_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;use_directory_urls&#39;</span><span class="p">]),</span>
        <span class="p">])</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertLogs</span><span class="p">(</span><span class="s1">&#39;mkdocs&#39;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s1">&#39;INFO&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">cm</span><span class="p">:</span>
            <span class="n">build</span><span class="o">.</span><span class="n">_build_extra_template</span><span class="p">(</span><span class="s1">&#39;foo.html&#39;</span><span class="p">,</span> <span class="n">files</span><span class="p">,</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">cm</span><span class="o">.</span><span class="n">output</span><span class="p">,</span>
            <span class="p">[</span><span class="s2">&quot;WARNING:mkdocs.commands.build:Error reading template &#39;foo.html&#39;: Error message.&quot;</span><span class="p">]</span>
        <span class="p">)</span>

    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.commands.build.open&#39;</span><span class="p">,</span> <span class="n">mock</span><span class="o">.</span><span class="n">mock_open</span><span class="p">(</span><span class="n">read_data</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">))</span>
    <span class="k">def</span> <span class="nf">test_skip_extra_template_empty_output</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">()</span>
        <span class="n">files</span> <span class="o">=</span> <span class="n">Files</span><span class="p">([</span>
            <span class="n">File</span><span class="p">(</span><span class="s1">&#39;foo.html&#39;</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;docs_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;site_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;use_directory_urls&#39;</span><span class="p">]),</span>
        <span class="p">])</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertLogs</span><span class="p">(</span><span class="s1">&#39;mkdocs&#39;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s1">&#39;INFO&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">cm</span><span class="p">:</span>
            <span class="n">build</span><span class="o">.</span><span class="n">_build_extra_template</span><span class="p">(</span><span class="s1">&#39;foo.html&#39;</span><span class="p">,</span> <span class="n">files</span><span class="p">,</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">mock</span><span class="o">.</span><span class="n">Mock</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">cm</span><span class="o">.</span><span class="n">output</span><span class="p">,</span>
            <span class="p">[</span><span class="s2">&quot;INFO:mkdocs.commands.build:Template skipped: &#39;foo.html&#39; generated empty output.&quot;</span><span class="p">]</span>
        <span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-27'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-27'>#</a>
      </div>
      <p>Test build._populate_page</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-28'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-28'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="nd">@tempdir</span><span class="p">(</span><span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;index.md&#39;</span><span class="p">:</span> <span class="s1">&#39;page content&#39;</span><span class="p">})</span>
    <span class="k">def</span> <span class="nf">test_populate_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">docs_dir</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="n">docs_dir</span><span class="o">=</span><span class="n">docs_dir</span><span class="p">)</span>
        <span class="n">file</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="s1">&#39;index.md&#39;</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;docs_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;site_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;use_directory_urls&#39;</span><span class="p">])</span>
        <span class="n">page</span> <span class="o">=</span> <span class="n">Page</span><span class="p">(</span><span class="s1">&#39;Foo&#39;</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">cfg</span><span class="p">)</span>
        <span class="n">build</span><span class="o">.</span><span class="n">_populate_page</span><span class="p">(</span><span class="n">page</span><span class="p">,</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">Files</span><span class="p">([</span><span class="n">file</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s1">&#39;&lt;p&gt;page content&lt;/p&gt;&#39;</span><span class="p">)</span>

    <span class="nd">@tempdir</span><span class="p">(</span><span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;testing.html&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;p&gt;page content&lt;/p&gt;&#39;</span><span class="p">})</span>
    <span class="k">def</span> <span class="nf">test_populate_page_dirty_modified</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">site_dir</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="n">site_dir</span><span class="o">=</span><span class="n">site_dir</span><span class="p">)</span>
        <span class="n">file</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="s1">&#39;testing.md&#39;</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;docs_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;site_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;use_directory_urls&#39;</span><span class="p">])</span>
        <span class="n">page</span> <span class="o">=</span> <span class="n">Page</span><span class="p">(</span><span class="s1">&#39;Foo&#39;</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">cfg</span><span class="p">)</span>
        <span class="n">build</span><span class="o">.</span><span class="n">_populate_page</span><span class="p">(</span><span class="n">page</span><span class="p">,</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">Files</span><span class="p">([</span><span class="n">file</span><span class="p">]),</span> <span class="n">dirty</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">markdown</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;# Welcome to MkDocs&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;&lt;h1 id=&quot;welcome-to-mkdocs&quot;&gt;Welcome to MkDocs&lt;/h1&gt;&#39;</span><span class="p">))</span>

    <span class="nd">@tempdir</span><span class="p">(</span><span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;index.md&#39;</span><span class="p">:</span> <span class="s1">&#39;page content&#39;</span><span class="p">})</span>
    <span class="nd">@tempdir</span><span class="p">(</span><span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;index.html&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;p&gt;page content&lt;/p&gt;&#39;</span><span class="p">})</span>
    <span class="k">def</span> <span class="nf">test_populate_page_dirty_not_modified</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">site_dir</span><span class="p">,</span> <span class="n">docs_dir</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="n">docs_dir</span><span class="o">=</span><span class="n">docs_dir</span><span class="p">,</span> <span class="n">site_dir</span><span class="o">=</span><span class="n">site_dir</span><span class="p">)</span>
        <span class="n">file</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="s1">&#39;index.md&#39;</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;docs_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;site_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;use_directory_urls&#39;</span><span class="p">])</span>
        <span class="n">page</span> <span class="o">=</span> <span class="n">Page</span><span class="p">(</span><span class="s1">&#39;Foo&#39;</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">cfg</span><span class="p">)</span>
        <span class="n">build</span><span class="o">.</span><span class="n">_populate_page</span><span class="p">(</span><span class="n">page</span><span class="p">,</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">Files</span><span class="p">([</span><span class="n">file</span><span class="p">]),</span> <span class="n">dirty</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-29'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-29'>#</a>
      </div>
      <p>Content is empty as file read was skipped</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">markdown</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-30'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-30'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="nd">@tempdir</span><span class="p">(</span><span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;index.md&#39;</span><span class="p">:</span> <span class="s1">&#39;new page content&#39;</span><span class="p">})</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.structure.pages.open&#39;</span><span class="p">,</span> <span class="n">side_effect</span><span class="o">=</span><span class="ne">OSError</span><span class="p">(</span><span class="s1">&#39;Error message.&#39;</span><span class="p">))</span>
    <span class="k">def</span> <span class="nf">test_populate_page_read_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">docs_dir</span><span class="p">,</span> <span class="n">mock_open</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="n">docs_dir</span><span class="o">=</span><span class="n">docs_dir</span><span class="p">)</span>
        <span class="n">file</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="s1">&#39;missing.md&#39;</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;docs_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;site_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;use_directory_urls&#39;</span><span class="p">])</span>
        <span class="n">page</span> <span class="o">=</span> <span class="n">Page</span><span class="p">(</span><span class="s1">&#39;Foo&#39;</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">cfg</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertLogs</span><span class="p">(</span><span class="s1">&#39;mkdocs&#39;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s1">&#39;ERROR&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">cm</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OSError</span><span class="p">,</span> <span class="n">build</span><span class="o">.</span><span class="n">_populate_page</span><span class="p">,</span> <span class="n">page</span><span class="p">,</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">Files</span><span class="p">([</span><span class="n">file</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">cm</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="p">[</span>
                <span class="s1">&#39;ERROR:mkdocs.structure.pages:File not found: missing.md&#39;</span><span class="p">,</span>
                <span class="s2">&quot;ERROR:mkdocs.commands.build:Error reading page &#39;missing.md&#39;: Error message.&quot;</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assert_mock_called_once</span><span class="p">(</span><span class="n">mock_open</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-31'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-31'>#</a>
      </div>
      <p>Test build._build_page</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-32'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-32'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="nd">@tempdir</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">test_build_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">site_dir</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="n">site_dir</span><span class="o">=</span><span class="n">site_dir</span><span class="p">,</span> <span class="n">nav</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;index.md&#39;</span><span class="p">],</span> <span class="n">plugins</span><span class="o">=</span><span class="p">[])</span>
        <span class="n">files</span> <span class="o">=</span> <span class="n">Files</span><span class="p">([</span><span class="n">File</span><span class="p">(</span><span class="s1">&#39;index.md&#39;</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;docs_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;site_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;use_directory_urls&#39;</span><span class="p">])])</span>
        <span class="n">nav</span> <span class="o">=</span> <span class="n">get_navigation</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="n">cfg</span><span class="p">)</span>
        <span class="n">page</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">documentation_pages</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">page</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-33'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-33'>#</a>
      </div>
      <p>Fake populate page</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">page</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Title&#39;</span>
        <span class="n">page</span><span class="o">.</span><span class="n">markdown</span> <span class="o">=</span> <span class="s1">&#39;page content&#39;</span>
        <span class="n">page</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="s1">&#39;&lt;p&gt;page content&lt;/p&gt;&#39;</span>
        <span class="n">build</span><span class="o">.</span><span class="n">_build_page</span><span class="p">(</span><span class="n">page</span><span class="p">,</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">files</span><span class="p">,</span> <span class="n">nav</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;theme&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_env</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertPathIsFile</span><span class="p">(</span><span class="n">site_dir</span><span class="p">,</span> <span class="s1">&#39;index.html&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-34'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-34'>#</a>
      </div>
      <p>TODO: fix this. It seems that jinja2 chokes on the mock object. Not sure how to resolve.
@tempdir()
@mock.patch(&lsquo;jinja2.environment.Template&rsquo;)
def test_build_page_empty(self, site_dir, mock_template):
    mock_template.render = mock.Mock(return_value=&rsquo;&lsquo;)
    cfg = load_config(site_dir=site_dir, nav=[&lsquo;index.md&rsquo;], plugins=[])
    files = Files([File(&lsquo;index.md&rsquo;, cfg[&lsquo;docs_dir&rsquo;], cfg[&lsquo;site_dir&rsquo;], cfg[&lsquo;use_directory_urls&rsquo;])])
    nav = get_navigation(files, cfg)
    page = files.documentation_pages()[0].page
    # Fake populate page
    page.title = &lsquo;&rsquo;
    page.markdown = &lsquo;&rsquo;
    page.content = &lsquo;&rsquo;
    with self.assertLogs(&lsquo;mkdocs&rsquo;, level=&rsquo;INFO&rsquo;) as cm:
        build._build_page(page, cfg, files, nav, cfg[&lsquo;theme&rsquo;].get_env())
    self.assertEqual(
        cm.output,
        [&ldquo;INFO:mkdocs.commands.build:Page skipped: &lsquo;index.md&rsquo;. Generated empty output.&rdquo;]
    )
    self.assert_mock_called_once(mock_template.render)
    self.assertPathNotFile(site_dir, &lsquo;index.html&rsquo;)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-35'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-35'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="nd">@tempdir</span><span class="p">(</span><span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;index.md&#39;</span><span class="p">:</span> <span class="s1">&#39;page content&#39;</span><span class="p">})</span>
    <span class="nd">@tempdir</span><span class="p">(</span><span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;index.html&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;p&gt;page content&lt;/p&gt;&#39;</span><span class="p">})</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.utils.write_file&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_build_page_dirty_modified</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">site_dir</span><span class="p">,</span> <span class="n">docs_dir</span><span class="p">,</span> <span class="n">mock_write_file</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="n">docs_dir</span><span class="o">=</span><span class="n">docs_dir</span><span class="p">,</span> <span class="n">site_dir</span><span class="o">=</span><span class="n">site_dir</span><span class="p">,</span> <span class="n">nav</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;index.md&#39;</span><span class="p">],</span> <span class="n">plugins</span><span class="o">=</span><span class="p">[])</span>
        <span class="n">files</span> <span class="o">=</span> <span class="n">Files</span><span class="p">([</span><span class="n">File</span><span class="p">(</span><span class="s1">&#39;index.md&#39;</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;docs_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;site_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;use_directory_urls&#39;</span><span class="p">])])</span>
        <span class="n">nav</span> <span class="o">=</span> <span class="n">get_navigation</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="n">cfg</span><span class="p">)</span>
        <span class="n">page</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">documentation_pages</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">page</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-36'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-36'>#</a>
      </div>
      <p>Fake populate page</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">page</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Title&#39;</span>
        <span class="n">page</span><span class="o">.</span><span class="n">markdown</span> <span class="o">=</span> <span class="s1">&#39;new page content&#39;</span>
        <span class="n">page</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="s1">&#39;&lt;p&gt;new page content&lt;/p&gt;&#39;</span>
        <span class="n">build</span><span class="o">.</span><span class="n">_build_page</span><span class="p">(</span><span class="n">page</span><span class="p">,</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">files</span><span class="p">,</span> <span class="n">nav</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;theme&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_env</span><span class="p">(),</span> <span class="n">dirty</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">mock_write_file</span><span class="o">.</span><span class="n">assert_not_called</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-37'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-37'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="nd">@tempdir</span><span class="p">(</span><span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;testing.html&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;p&gt;page content&lt;/p&gt;&#39;</span><span class="p">})</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.utils.write_file&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_build_page_dirty_not_modified</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">site_dir</span><span class="p">,</span> <span class="n">mock_write_file</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="n">site_dir</span><span class="o">=</span><span class="n">site_dir</span><span class="p">,</span> <span class="n">nav</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;testing.md&#39;</span><span class="p">],</span> <span class="n">plugins</span><span class="o">=</span><span class="p">[])</span>
        <span class="n">files</span> <span class="o">=</span> <span class="n">Files</span><span class="p">([</span><span class="n">File</span><span class="p">(</span><span class="s1">&#39;testing.md&#39;</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;docs_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;site_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;use_directory_urls&#39;</span><span class="p">])])</span>
        <span class="n">nav</span> <span class="o">=</span> <span class="n">get_navigation</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="n">cfg</span><span class="p">)</span>
        <span class="n">page</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">documentation_pages</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">page</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-38'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-38'>#</a>
      </div>
      <p>Fake populate page</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">page</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Title&#39;</span>
        <span class="n">page</span><span class="o">.</span><span class="n">markdown</span> <span class="o">=</span> <span class="s1">&#39;page content&#39;</span>
        <span class="n">page</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="s1">&#39;&lt;p&gt;page content&lt;/p&gt;&#39;</span>
        <span class="n">build</span><span class="o">.</span><span class="n">_build_page</span><span class="p">(</span><span class="n">page</span><span class="p">,</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">files</span><span class="p">,</span> <span class="n">nav</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;theme&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_env</span><span class="p">(),</span> <span class="n">dirty</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assert_mock_called_once</span><span class="p">(</span><span class="n">mock_write_file</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-39'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-39'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="nd">@tempdir</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">test_build_page_custom_template</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">site_dir</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="n">site_dir</span><span class="o">=</span><span class="n">site_dir</span><span class="p">,</span> <span class="n">nav</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;index.md&#39;</span><span class="p">],</span> <span class="n">plugins</span><span class="o">=</span><span class="p">[])</span>
        <span class="n">files</span> <span class="o">=</span> <span class="n">Files</span><span class="p">([</span><span class="n">File</span><span class="p">(</span><span class="s1">&#39;index.md&#39;</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;docs_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;site_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;use_directory_urls&#39;</span><span class="p">])])</span>
        <span class="n">nav</span> <span class="o">=</span> <span class="n">get_navigation</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="n">cfg</span><span class="p">)</span>
        <span class="n">page</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">documentation_pages</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">page</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-40'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-40'>#</a>
      </div>
      <p>Fake populate page</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">page</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Title&#39;</span>
        <span class="n">page</span><span class="o">.</span><span class="n">meta</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;template&#39;</span><span class="p">:</span> <span class="s1">&#39;404.html&#39;</span><span class="p">}</span>
        <span class="n">page</span><span class="o">.</span><span class="n">markdown</span> <span class="o">=</span> <span class="s1">&#39;page content&#39;</span>
        <span class="n">page</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="s1">&#39;&lt;p&gt;page content&lt;/p&gt;&#39;</span>
        <span class="n">build</span><span class="o">.</span><span class="n">_build_page</span><span class="p">(</span><span class="n">page</span><span class="p">,</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">files</span><span class="p">,</span> <span class="n">nav</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;theme&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_env</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertPathIsFile</span><span class="p">(</span><span class="n">site_dir</span><span class="p">,</span> <span class="s1">&#39;index.html&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-41'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-41'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="nd">@tempdir</span><span class="p">()</span>
    <span class="nd">@mock</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="s1">&#39;mkdocs.utils.write_file&#39;</span><span class="p">,</span> <span class="n">side_effect</span><span class="o">=</span><span class="ne">OSError</span><span class="p">(</span><span class="s1">&#39;Error message.&#39;</span><span class="p">))</span>
    <span class="k">def</span> <span class="nf">test_build_page_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">site_dir</span><span class="p">,</span> <span class="n">mock_write_file</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="n">site_dir</span><span class="o">=</span><span class="n">site_dir</span><span class="p">,</span> <span class="n">nav</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;index.md&#39;</span><span class="p">],</span> <span class="n">plugins</span><span class="o">=</span><span class="p">[])</span>
        <span class="n">files</span> <span class="o">=</span> <span class="n">Files</span><span class="p">([</span><span class="n">File</span><span class="p">(</span><span class="s1">&#39;index.md&#39;</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;docs_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;site_dir&#39;</span><span class="p">],</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;use_directory_urls&#39;</span><span class="p">])])</span>
        <span class="n">nav</span> <span class="o">=</span> <span class="n">get_navigation</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="n">cfg</span><span class="p">)</span>
        <span class="n">page</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">documentation_pages</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">page</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-42'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-42'>#</a>
      </div>
      <p>Fake populate page</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">page</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Title&#39;</span>
        <span class="n">page</span><span class="o">.</span><span class="n">markdown</span> <span class="o">=</span> <span class="s1">&#39;page content&#39;</span>
        <span class="n">page</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="s1">&#39;&lt;p&gt;page content&lt;/p&gt;&#39;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertLogs</span><span class="p">(</span><span class="s1">&#39;mkdocs&#39;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s1">&#39;ERROR&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">cm</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">OSError</span><span class="p">,</span> <span class="n">build</span><span class="o">.</span><span class="n">_build_page</span><span class="p">,</span> <span class="n">page</span><span class="p">,</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">files</span><span class="p">,</span> <span class="n">nav</span><span class="p">,</span> <span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;theme&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_env</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">cm</span><span class="o">.</span><span class="n">output</span><span class="p">,</span>
            <span class="p">[</span><span class="s2">&quot;ERROR:mkdocs.commands.build:Error building page &#39;index.md&#39;: Error message.&quot;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assert_mock_called_once</span><span class="p">(</span><span class="n">mock_write_file</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-43'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-43'>#</a>
      </div>
      <p>Test build.build</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-44'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-44'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="nd">@tempdir</span><span class="p">(</span><span class="n">files</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;index.md&#39;</span><span class="p">:</span> <span class="s1">&#39;page content&#39;</span><span class="p">,</span>
        <span class="s1">&#39;empty.md&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;img.jpg&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;static.html&#39;</span><span class="p">:</span> <span class="s1">&#39;content&#39;</span><span class="p">,</span>
        <span class="s1">&#39;.hidden&#39;</span><span class="p">:</span> <span class="s1">&#39;content&#39;</span><span class="p">,</span>
        <span class="s1">&#39;.git/hidden&#39;</span><span class="p">:</span> <span class="s1">&#39;content&#39;</span>
    <span class="p">})</span>
    <span class="nd">@tempdir</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">test_copying_media</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">site_dir</span><span class="p">,</span> <span class="n">docs_dir</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="n">docs_dir</span><span class="o">=</span><span class="n">docs_dir</span><span class="p">,</span> <span class="n">site_dir</span><span class="o">=</span><span class="n">site_dir</span><span class="p">)</span>
        <span class="n">build</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">cfg</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-45'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-45'>#</a>
      </div>
      <p>Verify that only non-empty md file (coverted to html), static HTML file and image are copied.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertPathIsFile</span><span class="p">(</span><span class="n">site_dir</span><span class="p">,</span> <span class="s1">&#39;index.html&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertPathIsFile</span><span class="p">(</span><span class="n">site_dir</span><span class="p">,</span> <span class="s1">&#39;img.jpg&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertPathIsFile</span><span class="p">(</span><span class="n">site_dir</span><span class="p">,</span> <span class="s1">&#39;static.html&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertPathNotExists</span><span class="p">(</span><span class="n">site_dir</span><span class="p">,</span> <span class="s1">&#39;empty.md&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertPathNotExists</span><span class="p">(</span><span class="n">site_dir</span><span class="p">,</span> <span class="s1">&#39;.hidden&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertPathNotExists</span><span class="p">(</span><span class="n">site_dir</span><span class="p">,</span> <span class="s1">&#39;.git/hidden&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-46'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-46'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="nd">@tempdir</span><span class="p">(</span><span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;index.md&#39;</span><span class="p">:</span> <span class="s1">&#39;page content&#39;</span><span class="p">})</span>
    <span class="nd">@tempdir</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">test_copy_theme_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">site_dir</span><span class="p">,</span> <span class="n">docs_dir</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="n">docs_dir</span><span class="o">=</span><span class="n">docs_dir</span><span class="p">,</span> <span class="n">site_dir</span><span class="o">=</span><span class="n">site_dir</span><span class="p">)</span>
        <span class="n">build</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">cfg</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-47'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-47'>#</a>
      </div>
      <p>Verify only theme media are copied, not templates or Python files.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">assertPathIsFile</span><span class="p">(</span><span class="n">site_dir</span><span class="p">,</span> <span class="s1">&#39;index.html&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertPathIsFile</span><span class="p">(</span><span class="n">site_dir</span><span class="p">,</span> <span class="s1">&#39;404.html&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertPathIsDir</span><span class="p">(</span><span class="n">site_dir</span><span class="p">,</span> <span class="s1">&#39;js&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertPathIsDir</span><span class="p">(</span><span class="n">site_dir</span><span class="p">,</span> <span class="s1">&#39;css&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertPathIsDir</span><span class="p">(</span><span class="n">site_dir</span><span class="p">,</span> <span class="s1">&#39;img&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertPathIsDir</span><span class="p">(</span><span class="n">site_dir</span><span class="p">,</span> <span class="s1">&#39;fonts&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertPathNotExists</span><span class="p">(</span><span class="n">site_dir</span><span class="p">,</span> <span class="s1">&#39;__init__.py&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertPathNotExists</span><span class="p">(</span><span class="n">site_dir</span><span class="p">,</span> <span class="s1">&#39;__init__.pyc&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertPathNotExists</span><span class="p">(</span><span class="n">site_dir</span><span class="p">,</span> <span class="s1">&#39;base.html&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertPathNotExists</span><span class="p">(</span><span class="n">site_dir</span><span class="p">,</span> <span class="s1">&#39;content.html&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertPathNotExists</span><span class="p">(</span><span class="n">site_dir</span><span class="p">,</span> <span class="s1">&#39;main.html&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-48'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-48'>#</a>
      </div>
      <p>Test build.site_directory_contains_stale_files</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-49'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-49'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="nd">@tempdir</span><span class="p">(</span><span class="n">files</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;index.html&#39;</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">test_site_dir_contains_stale_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">site_dir</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">build</span><span class="o">.</span><span class="n">site_directory_contains_stale_files</span><span class="p">(</span><span class="n">site_dir</span><span class="p">))</span>

    <span class="nd">@tempdir</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">test_not_site_dir_contains_stale_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">site_dir</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">build</span><span class="o">.</span><span class="n">site_directory_contains_stale_files</span><span class="p">(</span><span class="n">site_dir</span><span class="p">))</span>

</pre></div>
    </div>
  </div>
  <div class='clearall'></div>
</div>
</body>
